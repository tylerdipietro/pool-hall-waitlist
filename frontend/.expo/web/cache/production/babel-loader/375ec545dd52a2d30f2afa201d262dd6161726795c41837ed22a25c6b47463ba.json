{"ast":null,"code":"import{io}from'socket.io-client';var API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'http://localhost:3000';var socket;export function initSocket(){if(!socket){socket=io(API_BASE_URL,{autoConnect:true});}return socket;}function emit(event,payload){if(!socket)initSocket();socket.emit(event,payload);}export function joinQueue(userId){console.log('joinQueue called with userId:',userId);emit('join_queue',userId);}export function joinTable(tableId,userId){emit('join_table',{tableId:tableId,userId:userId});}export function claimWin(tableId,winnerId){console.log('[claimWin] Emitting claim_win',{tableId:tableId,winnerId:winnerId});emit('claim_win',{tableId:tableId,winnerId:winnerId});}export var confirmWin=function confirmWin(tableId,winnerId,loserId,confirmed,cb){socket.emit('confirm_win',{tableId:tableId,winnerId:winnerId,loserId:loserId,confirmed:confirmed},cb);};export function clearQueue(){emit('admin:clear_queue');}export function clearTables(){emit('admin:clear_tables');}export function removePlayer(tableId,userId){emit('admin:remove_player',{tableId:tableId,userId:userId});}export default initSocket();","map":{"version":3,"names":["io","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","socket","initSocket","autoConnect","emit","event","payload","joinQueue","userId","console","log","joinTable","tableId","claimWin","winnerId","confirmWin","loserId","confirmed","cb","clearQueue","clearTables","removePlayer"],"sources":["D:/pool-hall-waitlist/frontend/utils/socket.js"],"sourcesContent":["import { io } from 'socket.io-client';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:3000';\r\n\r\nlet socket;\r\n\r\nexport function initSocket() {\r\n  if (!socket) {\r\n    socket = io(API_BASE_URL, {\r\n      autoConnect: true,\r\n      // Optional: transports: ['websocket']\r\n    });\r\n  }\r\n  return socket;\r\n}\r\n\r\nfunction emit(event, payload) {\r\n  if (!socket) initSocket();\r\n  socket.emit(event, payload);\r\n}\r\n\r\n// Client joins the matchmaking queue\r\nexport function joinQueue(userId) {\r\n  console.log('joinQueue called with userId:', userId);\r\n  emit('join_queue', userId);\r\n}\r\n\r\n// Client joins a specific table\r\nexport function joinTable(tableId, userId) {\r\n  emit('join_table', { tableId, userId });\r\n}\r\n\r\n// Player claims a win (sends winnerId to server)\r\nexport function claimWin(tableId, winnerId) {\r\n  console.log('[claimWin] Emitting claim_win', { tableId, winnerId });\r\n  emit('claim_win', { tableId, winnerId });\r\n}\r\n\r\nexport const confirmWin = (tableId, winnerId, loserId, confirmed, cb) => {\r\n  socket.emit('confirm_win', { tableId, winnerId, loserId, confirmed }, cb);\r\n};\r\n\r\n\r\n\r\n// Admin clears the queue\r\nexport function clearQueue() {\r\n  emit('admin:clear_queue');\r\n}\r\n\r\n// Admin clears all tables\r\nexport function clearTables() {\r\n  emit('admin:clear_tables');\r\n}\r\n\r\n// Admin forcibly removes a player from a table\r\nexport function removePlayer(tableId, userId) {\r\n  emit('admin:remove_player', { tableId, userId });\r\n}\r\n\r\n// Export socket instance as default for use in components\r\nexport default initSocket();\r\n"],"mappings":"AAAA,OAASA,EAAE,KAAQ,kBAAkB,CAErC,GAAM,CAAAC,YAAY,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAI,uBAAuB,CAElF,GAAI,CAAAC,MAAM,CAEV,MAAO,SAAS,CAAAC,UAAUA,CAAA,CAAG,CAC3B,GAAI,CAACD,MAAM,CAAE,CACXA,MAAM,CAAGL,EAAE,CAACC,YAAY,CAAE,CACxBM,WAAW,CAAE,IAEf,CAAC,CAAC,CACJ,CACA,MAAO,CAAAF,MAAM,CACf,CAEA,QAAS,CAAAG,IAAIA,CAACC,KAAK,CAAEC,OAAO,CAAE,CAC5B,GAAI,CAACL,MAAM,CAAEC,UAAU,CAAC,CAAC,CACzBD,MAAM,CAACG,IAAI,CAACC,KAAK,CAAEC,OAAO,CAAC,CAC7B,CAGA,MAAO,SAAS,CAAAC,SAASA,CAACC,MAAM,CAAE,CAChCC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEF,MAAM,CAAC,CACpDJ,IAAI,CAAC,YAAY,CAAEI,MAAM,CAAC,CAC5B,CAGA,MAAO,SAAS,CAAAG,SAASA,CAACC,OAAO,CAAEJ,MAAM,CAAE,CACzCJ,IAAI,CAAC,YAAY,CAAE,CAAEQ,OAAO,CAAPA,OAAO,CAAEJ,MAAM,CAANA,MAAO,CAAC,CAAC,CACzC,CAGA,MAAO,SAAS,CAAAK,QAAQA,CAACD,OAAO,CAAEE,QAAQ,CAAE,CAC1CL,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAE,CAAEE,OAAO,CAAPA,OAAO,CAAEE,QAAQ,CAARA,QAAS,CAAC,CAAC,CACnEV,IAAI,CAAC,WAAW,CAAE,CAAEQ,OAAO,CAAPA,OAAO,CAAEE,QAAQ,CAARA,QAAS,CAAC,CAAC,CAC1C,CAEA,MAAO,IAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIH,OAAO,CAAEE,QAAQ,CAAEE,OAAO,CAAEC,SAAS,CAAEC,EAAE,CAAK,CACvEjB,MAAM,CAACG,IAAI,CAAC,aAAa,CAAE,CAAEQ,OAAO,CAAPA,OAAO,CAAEE,QAAQ,CAARA,QAAQ,CAAEE,OAAO,CAAPA,OAAO,CAAEC,SAAS,CAATA,SAAU,CAAC,CAAEC,EAAE,CAAC,CAC3E,CAAC,CAKD,MAAO,SAAS,CAAAC,UAAUA,CAAA,CAAG,CAC3Bf,IAAI,CAAC,mBAAmB,CAAC,CAC3B,CAGA,MAAO,SAAS,CAAAgB,WAAWA,CAAA,CAAG,CAC5BhB,IAAI,CAAC,oBAAoB,CAAC,CAC5B,CAGA,MAAO,SAAS,CAAAiB,YAAYA,CAACT,OAAO,CAAEJ,MAAM,CAAE,CAC5CJ,IAAI,CAAC,qBAAqB,CAAE,CAAEQ,OAAO,CAAPA,OAAO,CAAEJ,MAAM,CAANA,MAAO,CAAC,CAAC,CAClD,CAGA,cAAe,CAAAN,UAAU,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
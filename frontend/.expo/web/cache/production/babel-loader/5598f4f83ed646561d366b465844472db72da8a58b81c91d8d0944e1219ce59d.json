{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useContext,useEffect,useState,useRef}from'react';import{AuthContext}from'../contexts/AuthContext';import TableCard from'./TableCard';import socket,{joinQueue,clearQueue,clearTables,logoutUser,confirmWin}from'../utils/socket';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Dashboard(){var _useContext=useContext(AuthContext),user=_useContext.user,setUser=_useContext.setUser,loading=_useContext.loading;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),queue=_useState2[0],setQueue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tables=_useState4[0],setTables=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),inviteModalVisible=_useState6[0],setInviteModalVisible=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),invitedTableId=_useState8[0],setInvitedTableId=_useState8[1];var _useState9=useState(30),_useState0=_slicedToArray(_useState9,2),inviteTimer=_useState0[0],setInviteTimer=_useState0[1];var inviteIntervalRef=useRef(null);var _useState1=useState(null),_useState10=_slicedToArray(_useState1,2),winRequest=_useState10[0],setWinRequest=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),confirmingWin=_useState12[0],setConfirmingWin=_useState12[1];useEffect(function(){function handleStateUpdate(_ref){var queue=_ref.queue,tables=_ref.tables;console.log('Received state_update with queue:',queue,'tables:',tables);setQueue(queue);setTables(tables);}function handleInvite(tableId){setInvitedTableId(tableId);setInviteModalVisible(true);setInviteTimer(30);if(inviteIntervalRef.current){clearInterval(inviteIntervalRef.current);}inviteIntervalRef.current=setInterval(function(){setInviteTimer(function(prev){if(prev<=1){clearInterval(inviteIntervalRef.current);handleSkipInvite();return 0;}return prev-1;});},1000);}function handleWinRequest(data){console.log('Received win confirmation request:',data);setWinRequest(data);}socket.on('state_update',handleStateUpdate);socket.on('table_invite',function(_ref2){var tableId=_ref2.tableId;handleInvite(tableId);});socket.on('win_confirmation_request',handleWinRequest);return function(){socket.off('state_update',handleStateUpdate);socket.off('invite:joinTable',handleInvite);socket.off('win_confirmation_request',handleWinRequest);if(inviteIntervalRef.current){clearInterval(inviteIntervalRef.current);}};},[]);var handleConfirmWin=function handleConfirmWin(){if(!winRequest||confirmingWin)return;setConfirmingWin(true);confirmWin(winRequest.tableId,winRequest.winnerId,winRequest.loserId,true,function(response){console.log('Confirm win callback:',response);setConfirmingWin(false);if(response!=null&&response.success){setWinRequest(null);}});};var handleRejectWin=function handleRejectWin(){setWinRequest(null);};var handleJoinQueue=function handleJoinQueue(){if(user!=null&&user._id)joinQueue(user._id);};var handleClearQueue=function handleClearQueue(){return clearQueue();};var handleClearTables=function handleClearTables(){return clearTables();};var handleAcceptInvite=function handleAcceptInvite(){if(!invitedTableId)return;socket.emit('accept_invite',{tableId:invitedTableId,userId:user._id});clearInterval(inviteIntervalRef.current);setInviteModalVisible(false);setInvitedTableId(null);};var handleSkipInvite=function handleSkipInvite(){socket.emit('invite:skip',{userId:user._id});clearInterval(inviteIntervalRef.current);setInviteModalVisible(false);setInvitedTableId(null);};var handleLogout=function(){var _ref3=_asyncToGenerator(function*(){try{var res=yield fetch('/api/auth/logout',{method:'POST',credentials:'include'});if(res.ok)setUser(null);}catch(error){console.error('Logout failed:',error);}});return function handleLogout(){return _ref3.apply(this,arguments);};}();if(loading)return _jsx(\"div\",{children:\"Loading...\"});if(!user)return _jsx(\"div\",{children:\"Please log in to see your dashboard\"});return _jsxs(\"div\",{style:{maxWidth:900,margin:'0 auto',padding:20},children:[_jsxs(\"h2\",{children:[\"Welcome, \",user.displayName||user.username]}),_jsx(\"button\",{onClick:handleLogout,style:{marginBottom:20},children:\"Logout\"}),_jsxs(\"div\",{style:{marginBottom:20},children:[_jsx(\"button\",{onClick:handleJoinQueue,children:\"Join Queue\"}),' ',user.isAdmin&&_jsxs(_Fragment,{children:[_jsx(\"button\",{onClick:handleClearQueue,style:{marginLeft:10},children:\"Clear Queue\"}),_jsx(\"button\",{onClick:handleClearTables,style:{marginLeft:10},children:\"Clear All Tables\"})]})]}),_jsx(\"h3\",{children:\"Queue:\"}),queue.length===0?_jsx(\"p\",{children:\"The queue is currently empty.\"}):_jsx(\"ol\",{children:queue.map(function(entry,index){var _entry$user,_entry$user2;return _jsx(\"li\",{children:((_entry$user2=entry.user)==null?void 0:_entry$user2.username)||'Unnamed User'},((_entry$user=entry.user)==null?void 0:_entry$user._id)||entry.userId||index);})}),_jsx(\"h3\",{children:\"Tables:\"}),_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:16,marginTop:12},children:tables.map(function(table,index){var _ref4,_table$_id;return _jsx(TableCard,{table:table},(_ref4=(_table$_id=table._id)!=null?_table$_id:table.tableNumber)!=null?_ref4:index);})}),winRequest&&_jsxs(\"div\",{style:{position:'fixed',top:100,left:'50%',transform:'translateX(-50%)',background:'white',border:'1px solid #ccc',padding:20,zIndex:1000},children:[_jsx(\"h4\",{children:\"Your opponent claims they won. Confirm?\"}),_jsx(\"button\",{onClick:handleConfirmWin,disabled:confirmingWin,style:{marginRight:10},children:confirmingWin?'Confirming...':'Confirm'}),_jsx(\"button\",{onClick:handleRejectWin,children:\"Reject\"})]}),inviteModalVisible&&_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:9999},children:_jsxs(\"div\",{style:{backgroundColor:'white',padding:20,borderRadius:10,textAlign:'center',minWidth:300},children:[_jsxs(\"p\",{children:[\"You have been invited to join table \",invitedTableId]}),_jsxs(\"p\",{children:[\"Time remaining: \",inviteTimer,\" seconds\"]}),_jsx(\"button\",{onClick:handleAcceptInvite,children:\"Accept Invite\"}),' ',_jsx(\"button\",{onClick:handleSkipInvite,children:\"Skip\"})]})})]});}","map":{"version":3,"names":["React","useContext","useEffect","useState","useRef","AuthContext","TableCard","socket","joinQueue","clearQueue","clearTables","logoutUser","confirmWin","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_useContext","user","setUser","loading","_useState","_useState2","_slicedToArray","queue","setQueue","_useState3","_useState4","tables","setTables","_useState5","_useState6","inviteModalVisible","setInviteModalVisible","_useState7","_useState8","invitedTableId","setInvitedTableId","_useState9","_useState0","inviteTimer","setInviteTimer","inviteIntervalRef","_useState1","_useState10","winRequest","setWinRequest","_useState11","_useState12","confirmingWin","setConfirmingWin","handleStateUpdate","_ref","console","log","handleInvite","tableId","current","clearInterval","setInterval","prev","handleSkipInvite","handleWinRequest","data","on","_ref2","off","handleConfirmWin","winnerId","loserId","response","success","handleRejectWin","handleJoinQueue","_id","handleClearQueue","handleClearTables","handleAcceptInvite","emit","userId","handleLogout","_ref3","_asyncToGenerator","res","fetch","method","credentials","ok","error","apply","arguments","children","style","maxWidth","margin","padding","displayName","username","onClick","marginBottom","isAdmin","marginLeft","length","map","entry","index","_entry$user","_entry$user2","display","flexWrap","gap","marginTop","table","_ref4","_table$_id","tableNumber","position","top","left","transform","background","border","zIndex","disabled","marginRight","right","bottom","backgroundColor","justifyContent","alignItems","borderRadius","textAlign","minWidth"],"sources":["D:/pool-hall-waitlist/frontend/components/Dashboard.js"],"sourcesContent":["import React, { useContext, useEffect, useState, useRef } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport TableCard from './TableCard';\r\nimport socket, {\r\n  joinQueue,\r\n  clearQueue,\r\n  clearTables,\r\n  logoutUser,\r\n  confirmWin\r\n} from '../utils/socket';\r\n\r\nexport default function Dashboard() {\r\n  const { user, setUser, loading } = useContext(AuthContext);\r\n\r\n  const [queue, setQueue] = useState([]);\r\n  const [tables, setTables] = useState([]);\r\n\r\n  // Invitation modal state\r\n  const [inviteModalVisible, setInviteModalVisible] = useState(false);\r\n  const [invitedTableId, setInvitedTableId] = useState(null);\r\n  const [inviteTimer, setInviteTimer] = useState(30);\r\n  const inviteIntervalRef = useRef(null);\r\n\r\n  // Win request state\r\n  const [winRequest, setWinRequest] = useState(null);\r\n  const [confirmingWin, setConfirmingWin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function handleStateUpdate({ queue, tables }) {\r\n      console.log('Received state_update with queue:', queue, 'tables:', tables);\r\n      setQueue(queue);\r\n      setTables(tables);\r\n    }\r\n\r\n    function handleInvite(tableId) {\r\n      setInvitedTableId(tableId);\r\n      setInviteModalVisible(true);\r\n      setInviteTimer(30);\r\n\r\n      // Clear any existing timer\r\n      if (inviteIntervalRef.current) {\r\n        clearInterval(inviteIntervalRef.current);\r\n      }\r\n\r\n      // Start countdown timer\r\n      inviteIntervalRef.current = setInterval(() => {\r\n        setInviteTimer((prev) => {\r\n          if (prev <= 1) {\r\n            clearInterval(inviteIntervalRef.current);\r\n            handleSkipInvite();\r\n            return 0;\r\n          }\r\n          return prev - 1;\r\n        });\r\n      }, 1000);\r\n    }\r\n\r\n    function handleWinRequest(data) {\r\n      console.log('Received win confirmation request:', data);\r\n      setWinRequest(data);\r\n    }\r\n\r\n    socket.on('state_update', handleStateUpdate);\r\n    socket.on('table_invite', ({ tableId }) => {\r\n      handleInvite(tableId);\r\n    });\r\n    socket.on('win_confirmation_request', handleWinRequest);\r\n\r\n    return () => {\r\n      socket.off('state_update', handleStateUpdate);\r\n      socket.off('invite:joinTable', handleInvite);\r\n      socket.off('win_confirmation_request', handleWinRequest);\r\n      if (inviteIntervalRef.current) {\r\n        clearInterval(inviteIntervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleConfirmWin = () => {\r\n    if (!winRequest || confirmingWin) return;\r\n    setConfirmingWin(true);\r\n    confirmWin(\r\n      winRequest.tableId,\r\n      winRequest.winnerId,\r\n      winRequest.loserId,\r\n      true,\r\n      (response) => {\r\n        console.log('Confirm win callback:', response);\r\n        setConfirmingWin(false);\r\n        if (response?.success) {\r\n          setWinRequest(null);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleRejectWin = () => {\r\n    setWinRequest(null);\r\n  };\r\n\r\n  const handleJoinQueue = () => {\r\n    if (user?._id) joinQueue(user._id);\r\n  };\r\n\r\n  const handleClearQueue = () => clearQueue();\r\n  const handleClearTables = () => clearTables();\r\n\r\n  const handleAcceptInvite = () => {\r\n    if (!invitedTableId) return;\r\n    socket.emit('accept_invite', { tableId: invitedTableId, userId: user._id });\r\n    clearInterval(inviteIntervalRef.current);\r\n    setInviteModalVisible(false);\r\n    setInvitedTableId(null);\r\n  };\r\n\r\n  const handleSkipInvite = () => {\r\n    socket.emit('invite:skip', { userId: user._id });\r\n    clearInterval(inviteIntervalRef.current);\r\n    setInviteModalVisible(false);\r\n    setInvitedTableId(null);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const res = await fetch('/api/auth/logout', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n      });\r\n      if (res.ok) setUser(null);\r\n    } catch (error) {\r\n      console.error('Logout failed:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (!user) return <div>Please log in to see your dashboard</div>;\r\n\r\n  return (\r\n    <div style={{ maxWidth: 900, margin: '0 auto', padding: 20 }}>\r\n      <h2>Welcome, {user.displayName || user.username}</h2>\r\n      <button onClick={handleLogout} style={{ marginBottom: 20 }}>\r\n        Logout\r\n      </button>\r\n\r\n      <div style={{ marginBottom: 20 }}>\r\n        <button onClick={handleJoinQueue}>Join Queue</button>{' '}\r\n        {user.isAdmin && (\r\n          <>\r\n            <button onClick={handleClearQueue} style={{ marginLeft: 10 }}>\r\n              Clear Queue\r\n            </button>\r\n            <button onClick={handleClearTables} style={{ marginLeft: 10 }}>\r\n              Clear All Tables\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <h3>Queue:</h3>\r\n      {queue.length === 0 ? (\r\n        <p>The queue is currently empty.</p>\r\n      ) : (\r\n        <ol>\r\n          {queue.map((entry, index) => (\r\n            <li key={entry.user?._id || entry.userId || index}>\r\n              {entry.user?.username || 'Unnamed User'}\r\n            </li>\r\n          ))}\r\n        </ol>\r\n      )}\r\n\r\n      <h3>Tables:</h3>\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexWrap: 'wrap',\r\n          gap: 16,\r\n          marginTop: 12,\r\n        }}\r\n      >\r\n        {tables.map((table, index) => (\r\n          <TableCard key={table._id ?? table.tableNumber ?? index} table={table} />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Win Confirmation Modal */}\r\n      {winRequest && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 100,\r\n            left: '50%',\r\n            transform: 'translateX(-50%)',\r\n            background: 'white',\r\n            border: '1px solid #ccc',\r\n            padding: 20,\r\n            zIndex: 1000,\r\n          }}\r\n        >\r\n          <h4>Your opponent claims they won. Confirm?</h4>\r\n          <button onClick={handleConfirmWin} disabled={confirmingWin} style={{ marginRight: 10 }}>\r\n            {confirmingWin ? 'Confirming...' : 'Confirm'}\r\n          </button>\r\n          <button onClick={handleRejectWin}>Reject</button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Invitation Modal */}\r\n      {inviteModalVisible && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            backgroundColor: 'rgba(0,0,0,0.5)',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            zIndex: 9999,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              backgroundColor: 'white',\r\n              padding: 20,\r\n              borderRadius: 10,\r\n              textAlign: 'center',\r\n              minWidth: 300,\r\n            }}\r\n          >\r\n            <p>You have been invited to join table {invitedTableId}</p>\r\n            <p>Time remaining: {inviteTimer} seconds</p>\r\n            <button onClick={handleAcceptInvite}>Accept Invite</button>{' '}\r\n            <button onClick={handleSkipInvite}>Skip</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{AuthContext}from'../contexts/AuthContext';import socket,{joinTable,claimWin,removePlayer}from'../utils/socket';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function TableCard(_ref){var _table$players,_table$tableNumber;var table=_ref.table;var _useContext=useContext(AuthContext),user=_useContext.user;var handleJoinTable=function handleJoinTable(){if(user!=null&&user._id&&table!=null&&table._id){socket.emit('join_table',{tableId:table._id,userId:user._id});}};var handleClaimWin=function handleClaimWin(){if(user!=null&&user._id&&table!=null&&table._id){claimWin(table._id,user._id);}};var handleAcceptInvite=function handleAcceptInvite(){if(invite&&user!=null&&user._id){socket.emit('accept_invite',{tableId:invite.tableId,userId:user._id});setInvite(null);}};var handleSkipInvite=function handleSkipInvite(){if(invite&&user!=null&&user._id){socket.emit('skip_invite',{tableId:invite.tableId,userId:user._id});setInvite(null);}};var handleRemovePlayer=function handleRemovePlayer(playerId){if(table!=null&&table._id&&playerId){removePlayer(table._id,playerId);}};var players=(_table$players=table==null?void 0:table.players)!=null?_table$players:[];useEffect(function(){if(user!=null&&user._id){socket.emit('register_user',{userId:user._id});}},[user]);return _jsx(_Fragment,{children:_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:10,marginBottom:10,borderRadius:5},children:[_jsxs(\"h4\",{children:[\"Table \",(_table$tableNumber=table==null?void 0:table.tableNumber)!=null?_table$tableNumber:'Unknown']}),_jsx(\"strong\",{children:\"Players:\"}),_jsx(\"ul\",{children:players.map(function(p,idx){var _player$_id;var player=p==null?void 0:p.user;var playerId=(_player$_id=player==null?void 0:player._id)!=null?_player$_id:idx;var displayName=(player==null?void 0:player.displayName)||(player==null?void 0:player.username)||'Unknown Player';return _jsxs(\"li\",{style:{marginBottom:6},children:[displayName,(user==null?void 0:user.isAdmin)&&(player==null?void 0:player._id)&&_jsx(\"button\",{onClick:function onClick(){return handleRemovePlayer(player._id);},style:{marginLeft:10},children:\"Remove Player\"}),(user==null?void 0:user._id)===(player==null?void 0:player._id)&&_jsx(\"button\",{onClick:handleClaimWin,style:{marginLeft:10},children:\"I WON\"})]},playerId);})}),players.length<2&&_jsx(\"button\",{onClick:handleJoinTable,children:\"Join Table\"})]})});}","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","socket","joinTable","claimWin","removePlayer","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","TableCard","_ref","_table$players","_table$tableNumber","table","_useContext","user","handleJoinTable","_id","emit","tableId","userId","handleClaimWin","handleAcceptInvite","invite","setInvite","handleSkipInvite","handleRemovePlayer","playerId","players","children","style","border","padding","marginBottom","borderRadius","tableNumber","map","p","idx","_player$_id","player","displayName","username","isAdmin","onClick","marginLeft","length"],"sources":["D:/pool-hall-waitlist/frontend/components/TableCard.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport socket, {\r\n  joinTable,\r\n  claimWin,\r\n  removePlayer,\r\n} from '../utils/socket';\r\n\r\nexport default function TableCard({ table }) {\r\n  const { user } = useContext(AuthContext);\r\n  \r\n\r\n  const handleJoinTable = () => {\r\n    if (user?._id && table?._id) {\r\n      socket.emit('join_table', { tableId: table._id, userId: user._id });\r\n    }\r\n  };\r\n\r\n  const handleClaimWin = () => {\r\n    if (user?._id && table?._id) {\r\n      claimWin(table._id, user._id);\r\n    }\r\n  };\r\n\r\n  const handleAcceptInvite = () => {\r\n    if (invite && user?._id) {\r\n      socket.emit('accept_invite', { tableId: invite.tableId, userId: user._id });\r\n      setInvite(null);\r\n    }\r\n  };\r\n\r\n  const handleSkipInvite = () => {\r\n    if (invite && user?._id) {\r\n      socket.emit('skip_invite', { tableId: invite.tableId, userId: user._id });\r\n      setInvite(null);\r\n    }\r\n  };\r\n\r\n  const handleRemovePlayer = (playerId) => {\r\n    if (table?._id && playerId) {\r\n      removePlayer(table._id, playerId);\r\n    }\r\n  };\r\n\r\n  const players = table?.players ?? [];\r\n\r\n  useEffect(() => {\r\n    if (user?._id) {\r\n      socket.emit('register_user', { userId: user._id });\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n\r\n      <div\r\n        style={{\r\n          border: '1px solid #ccc',\r\n          padding: 10,\r\n          marginBottom: 10,\r\n          borderRadius: 5,\r\n        }}\r\n      >\r\n        <h4>Table {table?.tableNumber ?? 'Unknown'}</h4>\r\n        <strong>Players:</strong>\r\n        <ul>\r\n          {players.map((p, idx) => {\r\n            const player = p?.user;\r\n            const playerId = player?._id ?? idx;\r\n            const displayName = player?.displayName || player?.username || 'Unknown Player';\r\n\r\n            return (\r\n              <li key={playerId} style={{ marginBottom: 6 }}>\r\n                {displayName}\r\n                {user?.isAdmin && player?._id && (\r\n                  <button onClick={() => handleRemovePlayer(player._id)} style={{ marginLeft: 10 }}>\r\n                    Remove Player\r\n                  </button>\r\n                )}\r\n                {user?._id === player?._id && (\r\n                  <button onClick={handleClaimWin} style={{ marginLeft: 10 }}>\r\n                    I WON\r\n                  </button>\r\n                )}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n\r\n        {players.length < 2 && <button onClick={handleJoinTable}>Join Table</button>}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
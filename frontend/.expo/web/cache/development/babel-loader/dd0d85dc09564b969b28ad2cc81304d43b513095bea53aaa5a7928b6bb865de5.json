{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\pool-hall-waitlist\\\\frontend\\\\components\\\\Dashboard.js\";\nimport React, { useContext, useEffect, useState, useRef } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nimport TableCard from './TableCard';\nimport socket, { joinQueue, clearQueue, clearTables, logoutUser, confirmWin } from '../utils/socket';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Dashboard() {\n  var _this = this;\n  var _useContext = useContext(AuthContext),\n    user = _useContext.user,\n    setUser = _useContext.setUser,\n    loading = _useContext.loading;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    queue = _useState2[0],\n    setQueue = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    tables = _useState4[0],\n    setTables = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    inviteModalVisible = _useState6[0],\n    setInviteModalVisible = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    invitedTableId = _useState8[0],\n    setInvitedTableId = _useState8[1];\n  var _useState9 = useState(30),\n    _useState0 = _slicedToArray(_useState9, 2),\n    inviteTimer = _useState0[0],\n    setInviteTimer = _useState0[1];\n  var inviteIntervalRef = useRef(null);\n  var _useState1 = useState(null),\n    _useState10 = _slicedToArray(_useState1, 2),\n    winRequest = _useState10[0],\n    setWinRequest = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    confirmingWin = _useState12[0],\n    setConfirmingWin = _useState12[1];\n  useEffect(function () {\n    function handleStateUpdate(_ref) {\n      var queue = _ref.queue,\n        tables = _ref.tables;\n      console.log('Received state_update with queue:', queue, 'tables:', tables);\n      setQueue(queue);\n      setTables(tables);\n    }\n    function handleInvite(tableId) {\n      setInvitedTableId(tableId);\n      setInviteModalVisible(true);\n      setInviteTimer(30);\n      if (inviteIntervalRef.current) {\n        clearInterval(inviteIntervalRef.current);\n      }\n      inviteIntervalRef.current = setInterval(function () {\n        setInviteTimer(function (prev) {\n          if (prev <= 1) {\n            clearInterval(inviteIntervalRef.current);\n            handleSkipInvite();\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n    }\n    function handleWinRequest(data) {\n      console.log('Received win confirmation request:', data);\n      setWinRequest(data);\n    }\n    socket.on('state_update', handleStateUpdate);\n    socket.on('table_invite', function (_ref2) {\n      var tableId = _ref2.tableId;\n      handleInvite(tableId);\n    });\n    socket.on('win_confirmation_request', handleWinRequest);\n    return function () {\n      socket.off('state_update', handleStateUpdate);\n      socket.off('invite:joinTable', handleInvite);\n      socket.off('win_confirmation_request', handleWinRequest);\n      if (inviteIntervalRef.current) {\n        clearInterval(inviteIntervalRef.current);\n      }\n    };\n  }, []);\n  var handleConfirmWin = function handleConfirmWin() {\n    if (!winRequest || confirmingWin) return;\n    setConfirmingWin(true);\n    confirmWin(winRequest.tableId, winRequest.winnerId, winRequest.loserId, true, function (response) {\n      console.log('Confirm win callback:', response);\n      setConfirmingWin(false);\n      if (response != null && response.success) {\n        setWinRequest(null);\n      }\n    });\n  };\n  var handleRejectWin = function handleRejectWin() {\n    setWinRequest(null);\n  };\n  var handleJoinQueue = function handleJoinQueue() {\n    if (user != null && user._id) joinQueue(user._id);\n  };\n  var handleClearQueue = function handleClearQueue() {\n    return clearQueue();\n  };\n  var handleClearTables = function handleClearTables() {\n    return clearTables();\n  };\n  var handleAcceptInvite = function handleAcceptInvite() {\n    if (!invitedTableId) return;\n    socket.emit('accept_invite', {\n      tableId: invitedTableId,\n      userId: user._id\n    });\n    clearInterval(inviteIntervalRef.current);\n    setInviteModalVisible(false);\n    setInvitedTableId(null);\n  };\n  var handleSkipInvite = function handleSkipInvite() {\n    socket.emit('invite:skip', {\n      userId: user._id\n    });\n    clearInterval(inviteIntervalRef.current);\n    setInviteModalVisible(false);\n    setInvitedTableId(null);\n  };\n  var handleLogout = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var res = yield fetch('/api/auth/logout', {\n          method: 'POST',\n          credentials: 'include'\n        });\n        if (res.ok) setUser(null);\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    });\n    return function handleLogout() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  if (loading) return _jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 23\n  }, this);\n  if (!user) return _jsxDEV(\"div\", {\n    children: \"Please log in to see your dashboard\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 21\n  }, this);\n  return _jsxDEV(\"div\", {\n    style: {\n      maxWidth: 900,\n      margin: '0 auto',\n      padding: 20\n    },\n    children: [_jsxDEV(\"h2\", {\n      children: [\"Welcome, \", user.displayName || user.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), _jsxDEV(\"button\", {\n      onClick: handleLogout,\n      style: {\n        marginBottom: 20\n      },\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      style: {\n        marginBottom: 20\n      },\n      children: [_jsxDEV(\"button\", {\n        onClick: handleJoinQueue,\n        children: \"Join Queue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), ' ', user.isAdmin && _jsxDEV(_Fragment, {\n        children: [_jsxDEV(\"button\", {\n          onClick: handleClearQueue,\n          style: {\n            marginLeft: 10\n          },\n          children: \"Clear Queue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), _jsxDEV(\"button\", {\n          onClick: handleClearTables,\n          style: {\n            marginLeft: 10\n          },\n          children: \"Clear All Tables\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), _jsxDEV(\"h3\", {\n      children: \"Queue:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), queue.length === 0 ? _jsxDEV(\"p\", {\n      children: \"The queue is currently empty.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }, this) : _jsxDEV(\"ol\", {\n      children: queue.map(function (entry, index) {\n        var _entry$user, _entry$user2;\n        return _jsxDEV(\"li\", {\n          children: ((_entry$user2 = entry.user) == null ? void 0 : _entry$user2.username) || 'Unnamed User'\n        }, ((_entry$user = entry.user) == null ? void 0 : _entry$user._id) || entry.userId || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }, this), _jsxDEV(\"h3\", {\n      children: \"Tables:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        gap: 16,\n        marginTop: 12\n      },\n      children: tables.map(function (table, index) {\n        var _ref4, _table$_id;\n        return _jsxDEV(TableCard, {\n          table: table\n        }, (_ref4 = (_table$_id = table._id) != null ? _table$_id : table.tableNumber) != null ? _ref4 : index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), winRequest && _jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 100,\n        left: '50%',\n        transform: 'translateX(-50%)',\n        background: 'white',\n        border: '1px solid #ccc',\n        padding: 20,\n        zIndex: 1000\n      },\n      children: [_jsxDEV(\"h4\", {\n        children: \"Your opponent claims they won. Confirm?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this), _jsxDEV(\"button\", {\n        onClick: handleConfirmWin,\n        disabled: confirmingWin,\n        style: {\n          marginRight: 10\n        },\n        children: confirmingWin ? 'Confirming...' : 'Confirm'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this), _jsxDEV(\"button\", {\n        onClick: handleRejectWin,\n        children: \"Reject\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }, this), inviteModalVisible && _jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0,0,0,0.5)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 9999\n      },\n      children: _jsxDEV(\"div\", {\n        style: {\n          backgroundColor: 'white',\n          padding: 20,\n          borderRadius: 10,\n          textAlign: 'center',\n          minWidth: 300\n        },\n        children: [_jsxDEV(\"p\", {\n          children: [\"You have been invited to join table \", invitedTableId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this), _jsxDEV(\"p\", {\n          children: [\"Time remaining: \", inviteTimer, \" seconds\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this), _jsxDEV(\"button\", {\n          onClick: handleAcceptInvite,\n          children: \"Accept Invite\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), ' ', _jsxDEV(\"button\", {\n          onClick: handleSkipInvite,\n          children: \"Skip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"names":["React","useContext","useEffect","useState","useRef","AuthContext","TableCard","socket","joinQueue","clearQueue","clearTables","logoutUser","confirmWin","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_this","_useContext","user","setUser","loading","_useState","_useState2","_slicedToArray","queue","setQueue","_useState3","_useState4","tables","setTables","_useState5","_useState6","inviteModalVisible","setInviteModalVisible","_useState7","_useState8","invitedTableId","setInvitedTableId","_useState9","_useState0","inviteTimer","setInviteTimer","inviteIntervalRef","_useState1","_useState10","winRequest","setWinRequest","_useState11","_useState12","confirmingWin","setConfirmingWin","handleStateUpdate","_ref","console","log","handleInvite","tableId","current","clearInterval","setInterval","prev","handleSkipInvite","handleWinRequest","data","on","_ref2","off","handleConfirmWin","winnerId","loserId","response","success","handleRejectWin","handleJoinQueue","_id","handleClearQueue","handleClearTables","handleAcceptInvite","emit","userId","handleLogout","_ref3","_asyncToGenerator","res","fetch","method","credentials","ok","error","apply","arguments","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","padding","displayName","username","onClick","marginBottom","isAdmin","marginLeft","length","map","entry","index","_entry$user","_entry$user2","display","flexWrap","gap","marginTop","table","_ref4","_table$_id","tableNumber","position","top","left","transform","background","border","zIndex","disabled","marginRight","right","bottom","backgroundColor","justifyContent","alignItems","borderRadius","textAlign","minWidth"],"sources":["D:/pool-hall-waitlist/frontend/components/Dashboard.js"],"sourcesContent":["import React, { useContext, useEffect, useState, useRef } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport TableCard from './TableCard';\r\nimport socket, {\r\n  joinQueue,\r\n  clearQueue,\r\n  clearTables,\r\n  logoutUser,\r\n  confirmWin\r\n} from '../utils/socket';\r\n\r\nexport default function Dashboard() {\r\n  const { user, setUser, loading } = useContext(AuthContext);\r\n\r\n  const [queue, setQueue] = useState([]);\r\n  const [tables, setTables] = useState([]);\r\n\r\n  // Invitation modal state\r\n  const [inviteModalVisible, setInviteModalVisible] = useState(false);\r\n  const [invitedTableId, setInvitedTableId] = useState(null);\r\n  const [inviteTimer, setInviteTimer] = useState(30);\r\n  const inviteIntervalRef = useRef(null);\r\n\r\n  // Win request state\r\n  const [winRequest, setWinRequest] = useState(null);\r\n  const [confirmingWin, setConfirmingWin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function handleStateUpdate({ queue, tables }) {\r\n      console.log('Received state_update with queue:', queue, 'tables:', tables);\r\n      setQueue(queue);\r\n      setTables(tables);\r\n    }\r\n\r\n    function handleInvite(tableId) {\r\n      setInvitedTableId(tableId);\r\n      setInviteModalVisible(true);\r\n      setInviteTimer(30);\r\n\r\n      // Clear any existing timer\r\n      if (inviteIntervalRef.current) {\r\n        clearInterval(inviteIntervalRef.current);\r\n      }\r\n\r\n      // Start countdown timer\r\n      inviteIntervalRef.current = setInterval(() => {\r\n        setInviteTimer((prev) => {\r\n          if (prev <= 1) {\r\n            clearInterval(inviteIntervalRef.current);\r\n            handleSkipInvite();\r\n            return 0;\r\n          }\r\n          return prev - 1;\r\n        });\r\n      }, 1000);\r\n    }\r\n\r\n    function handleWinRequest(data) {\r\n      console.log('Received win confirmation request:', data);\r\n      setWinRequest(data);\r\n    }\r\n\r\n    socket.on('state_update', handleStateUpdate);\r\n    socket.on('table_invite', ({ tableId }) => {\r\n      handleInvite(tableId);\r\n    });\r\n    socket.on('win_confirmation_request', handleWinRequest);\r\n\r\n    return () => {\r\n      socket.off('state_update', handleStateUpdate);\r\n      socket.off('invite:joinTable', handleInvite);\r\n      socket.off('win_confirmation_request', handleWinRequest);\r\n      if (inviteIntervalRef.current) {\r\n        clearInterval(inviteIntervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleConfirmWin = () => {\r\n    if (!winRequest || confirmingWin) return;\r\n    setConfirmingWin(true);\r\n    confirmWin(\r\n      winRequest.tableId,\r\n      winRequest.winnerId,\r\n      winRequest.loserId,\r\n      true,\r\n      (response) => {\r\n        console.log('Confirm win callback:', response);\r\n        setConfirmingWin(false);\r\n        if (response?.success) {\r\n          setWinRequest(null);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleRejectWin = () => {\r\n    setWinRequest(null);\r\n  };\r\n\r\n  const handleJoinQueue = () => {\r\n    if (user?._id) joinQueue(user._id);\r\n  };\r\n\r\n  const handleClearQueue = () => clearQueue();\r\n  const handleClearTables = () => clearTables();\r\n\r\n  const handleAcceptInvite = () => {\r\n    if (!invitedTableId) return;\r\n    socket.emit('accept_invite', { tableId: invitedTableId, userId: user._id });\r\n    clearInterval(inviteIntervalRef.current);\r\n    setInviteModalVisible(false);\r\n    setInvitedTableId(null);\r\n  };\r\n\r\n  const handleSkipInvite = () => {\r\n    socket.emit('invite:skip', { userId: user._id });\r\n    clearInterval(inviteIntervalRef.current);\r\n    setInviteModalVisible(false);\r\n    setInvitedTableId(null);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const res = await fetch('/api/auth/logout', {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n      });\r\n      if (res.ok) setUser(null);\r\n    } catch (error) {\r\n      console.error('Logout failed:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (!user) return <div>Please log in to see your dashboard</div>;\r\n\r\n  return (\r\n    <div style={{ maxWidth: 900, margin: '0 auto', padding: 20 }}>\r\n      <h2>Welcome, {user.displayName || user.username}</h2>\r\n      <button onClick={handleLogout} style={{ marginBottom: 20 }}>\r\n        Logout\r\n      </button>\r\n\r\n      <div style={{ marginBottom: 20 }}>\r\n        <button onClick={handleJoinQueue}>Join Queue</button>{' '}\r\n        {user.isAdmin && (\r\n          <>\r\n            <button onClick={handleClearQueue} style={{ marginLeft: 10 }}>\r\n              Clear Queue\r\n            </button>\r\n            <button onClick={handleClearTables} style={{ marginLeft: 10 }}>\r\n              Clear All Tables\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <h3>Queue:</h3>\r\n      {queue.length === 0 ? (\r\n        <p>The queue is currently empty.</p>\r\n      ) : (\r\n        <ol>\r\n          {queue.map((entry, index) => (\r\n            <li key={entry.user?._id || entry.userId || index}>\r\n              {entry.user?.username || 'Unnamed User'}\r\n            </li>\r\n          ))}\r\n        </ol>\r\n      )}\r\n\r\n      <h3>Tables:</h3>\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexWrap: 'wrap',\r\n          gap: 16,\r\n          marginTop: 12,\r\n        }}\r\n      >\r\n        {tables.map((table, index) => (\r\n          <TableCard key={table._id ?? table.tableNumber ?? index} table={table} />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Win Confirmation Modal */}\r\n      {winRequest && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 100,\r\n            left: '50%',\r\n            transform: 'translateX(-50%)',\r\n            background: 'white',\r\n            border: '1px solid #ccc',\r\n            padding: 20,\r\n            zIndex: 1000,\r\n          }}\r\n        >\r\n          <h4>Your opponent claims they won. Confirm?</h4>\r\n          <button onClick={handleConfirmWin} disabled={confirmingWin} style={{ marginRight: 10 }}>\r\n            {confirmingWin ? 'Confirming...' : 'Confirm'}\r\n          </button>\r\n          <button onClick={handleRejectWin}>Reject</button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Invitation Modal */}\r\n      {inviteModalVisible && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            backgroundColor: 'rgba(0,0,0,0.5)',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            zIndex: 9999,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              backgroundColor: 'white',\r\n              padding: 20,\r\n              borderRadius: 10,\r\n              textAlign: 'center',\r\n              minWidth: 300,\r\n            }}\r\n          >\r\n            <p>You have been invited to join table {invitedTableId}</p>\r\n            <p>Time remaining: {inviteTimer} seconds</p>\r\n            <button onClick={handleAcceptInvite}>Accept Invite</button>{' '}\r\n            <button onClick={handleSkipInvite}>Skip</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
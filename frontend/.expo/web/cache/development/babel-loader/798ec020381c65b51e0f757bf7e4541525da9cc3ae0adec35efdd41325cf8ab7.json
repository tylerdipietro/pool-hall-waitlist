{"ast":null,"code":"var _jsxFileName = \"D:\\\\pool-hall-waitlist\\\\frontend\\\\components\\\\TableCard.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nimport socket, { joinTable, claimWin, removePlayer } from '../utils/socket';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TableCard(_ref) {\n  var _table$players,\n    _table$tableNumber,\n    _this = this;\n  var table = _ref.table;\n  var _useContext = useContext(AuthContext),\n    user = _useContext.user;\n  var handleJoinTable = function handleJoinTable() {\n    if (user != null && user._id && table != null && table._id) {\n      socket.emit('join_table', {\n        tableId: table._id,\n        userId: user._id\n      });\n    }\n  };\n  var handleClaimWin = function handleClaimWin() {\n    if (user != null && user._id && table != null && table._id) {\n      claimWin(table._id, user._id);\n    }\n  };\n  var handleAcceptInvite = function handleAcceptInvite() {\n    if (invite && user != null && user._id) {\n      socket.emit('accept_invite', {\n        tableId: invite.tableId,\n        userId: user._id\n      });\n      setInvite(null);\n    }\n  };\n  var handleSkipInvite = function handleSkipInvite() {\n    if (invite && user != null && user._id) {\n      socket.emit('skip_invite', {\n        tableId: invite.tableId,\n        userId: user._id\n      });\n      setInvite(null);\n    }\n  };\n  var handleRemovePlayer = function handleRemovePlayer(playerId) {\n    if (table != null && table._id && playerId) {\n      removePlayer(table._id, playerId);\n    }\n  };\n  var players = (_table$players = table == null ? void 0 : table.players) != null ? _table$players : [];\n  useEffect(function () {\n    if (user != null && user._id) {\n      socket.emit('register_user', {\n        userId: user._id\n      });\n    }\n  }, [user]);\n  return _jsxDEV(_Fragment, {\n    children: _jsxDEV(\"div\", {\n      style: {\n        border: '1px solid #ccc',\n        padding: 10,\n        marginBottom: 10,\n        borderRadius: 5\n      },\n      children: [_jsxDEV(\"h4\", {\n        children: [\"Table \", (_table$tableNumber = table == null ? void 0 : table.tableNumber) != null ? _table$tableNumber : 'Unknown']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), _jsxDEV(\"strong\", {\n        children: \"Players:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), _jsxDEV(\"ul\", {\n        children: players.map(function (p, idx) {\n          var _player$_id;\n          var player = p == null ? void 0 : p.user;\n          var playerId = (_player$_id = player == null ? void 0 : player._id) != null ? _player$_id : idx;\n          var displayName = (player == null ? void 0 : player.displayName) || (player == null ? void 0 : player.username) || 'Unknown Player';\n          return _jsxDEV(\"li\", {\n            style: {\n              marginBottom: 6\n            },\n            children: [displayName, (user == null ? void 0 : user.isAdmin) && (player == null ? void 0 : player._id) && _jsxDEV(\"button\", {\n              onClick: function onClick() {\n                return handleRemovePlayer(player._id);\n              },\n              style: {\n                marginLeft: 10\n              },\n              children: \"Remove Player\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, _this), (user == null ? void 0 : user._id) === (player == null ? void 0 : player._id) && _jsxDEV(\"button\", {\n              onClick: handleClaimWin,\n              style: {\n                marginLeft: 10\n              },\n              children: \"I WON\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, _this)]\n          }, playerId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), players.length < 2 && _jsxDEV(\"button\", {\n        onClick: handleJoinTable,\n        children: \"Join Table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","socket","joinTable","claimWin","removePlayer","jsxDEV","_jsxDEV","Fragment","_Fragment","TableCard","_ref","_table$players","_table$tableNumber","_this","table","_useContext","user","handleJoinTable","_id","emit","tableId","userId","handleClaimWin","handleAcceptInvite","invite","setInvite","handleSkipInvite","handleRemovePlayer","playerId","players","children","style","border","padding","marginBottom","borderRadius","tableNumber","fileName","_jsxFileName","lineNumber","columnNumber","map","p","idx","_player$_id","player","displayName","username","isAdmin","onClick","marginLeft","length"],"sources":["D:/pool-hall-waitlist/frontend/components/TableCard.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport socket, {\r\n  joinTable,\r\n  claimWin,\r\n  removePlayer,\r\n} from '../utils/socket';\r\n\r\nexport default function TableCard({ table }) {\r\n  const { user } = useContext(AuthContext);\r\n  \r\n\r\n  const handleJoinTable = () => {\r\n    if (user?._id && table?._id) {\r\n      socket.emit('join_table', { tableId: table._id, userId: user._id });\r\n    }\r\n  };\r\n\r\n  const handleClaimWin = () => {\r\n    if (user?._id && table?._id) {\r\n      claimWin(table._id, user._id);\r\n    }\r\n  };\r\n\r\n  const handleAcceptInvite = () => {\r\n    if (invite && user?._id) {\r\n      socket.emit('accept_invite', { tableId: invite.tableId, userId: user._id });\r\n      setInvite(null);\r\n    }\r\n  };\r\n\r\n  const handleSkipInvite = () => {\r\n    if (invite && user?._id) {\r\n      socket.emit('skip_invite', { tableId: invite.tableId, userId: user._id });\r\n      setInvite(null);\r\n    }\r\n  };\r\n\r\n  const handleRemovePlayer = (playerId) => {\r\n    if (table?._id && playerId) {\r\n      removePlayer(table._id, playerId);\r\n    }\r\n  };\r\n\r\n  const players = table?.players ?? [];\r\n\r\n  useEffect(() => {\r\n    if (user?._id) {\r\n      socket.emit('register_user', { userId: user._id });\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <>\r\n\r\n      <div\r\n        style={{\r\n          border: '1px solid #ccc',\r\n          padding: 10,\r\n          marginBottom: 10,\r\n          borderRadius: 5,\r\n        }}\r\n      >\r\n        <h4>Table {table?.tableNumber ?? 'Unknown'}</h4>\r\n        <strong>Players:</strong>\r\n        <ul>\r\n          {players.map((p, idx) => {\r\n            const player = p?.user;\r\n            const playerId = player?._id ?? idx;\r\n            const displayName = player?.displayName || player?.username || 'Unknown Player';\r\n\r\n            return (\r\n              <li key={playerId} style={{ marginBottom: 6 }}>\r\n                {displayName}\r\n                {user?.isAdmin && player?._id && (\r\n                  <button onClick={() => handleRemovePlayer(player._id)} style={{ marginLeft: 10 }}>\r\n                    Remove Player\r\n                  </button>\r\n                )}\r\n                {user?._id === player?._id && (\r\n                  <button onClick={handleClaimWin} style={{ marginLeft: 10 }}>\r\n                    I WON\r\n                  </button>\r\n                )}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n\r\n        {players.length < 2 && <button onClick={handleJoinTable}>Join Table</button>}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}